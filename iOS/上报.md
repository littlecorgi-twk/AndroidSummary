# 上报

## 暂停贴上报

### 曝光失败上报

上报的方法是 `QADBaseInsideFunnelReporter.failExposureFunnelReport()`



调用的地方总共有四处：

-   `QADInsideAdxPauseItemView.didFailLoadWithError`
-   `QADInsidePddPauseItemView.didFailLoadWithError`
-   `QADInsideStandardPauseItemView.didFailLoadWithError`
-   `QADVideoPauseAdExposureReportHandler.didFailLoadWithError`

#### 图片暂停广告

-   `QADInsideAdxPauseItemView.didFailLoadWithError`
-   `QADInsidePddPauseItemView.didFailLoadWithError`
-   `QADInsideStandardPauseItemView.didFailLoadWithError` 

failReason均为 `QADPauseCancelTypeImageDowloadError` 5



>   问题是
>
>   1.   曝光失败的failReason 1、2 没上报



#### 视频暂停广告

对应的是 `QADVideoPauseAdExposureReportHandler.didFailLoadWithError`。调用前会先判断当前播放时间是不是小于等于 0，如果是，则不需要上报。此时会将入参 `cancelType` 传递给上报方法的 `failReason`。

![image-20230903231554227](/Users/wellstian/Documents/Android/AndroidSummary/PIC/image-20230903231554227.png)

而调用这个方法的地方只有一处： `QADPauseVideoBusinessHandler.closeAdUIView` ，而这个方法进而会被几个 `did` 方法调用：

-   `didReceiveAdCancenlAd`：cancelType 是 cancelModel.cancelType 这个 cancelType 对应的是![image-20230903231643869](/Users/wellstian/Documents/Android/AndroidSummary/PIC/image-20230903231643869.png)
-   `didReceiveAdClickPauseCloseButton`：cancelType 是 QADPauseCancelTypeReturn 2
-   `didReceiveAdPlayerStatusChange`：cancelType 是 QADPauseCancelTypeResumePlay 1
-   `didReceiveAdScreenModeWillChange`：cancelType 是 QADPauseCancelTypeReturn 2
-   `handleDeviceOrientationChange`：cancelType 是 QADPauseCancelTypeNormal 0



>   问题是
>
>   1.   为什么需要播放时长大于 0 才上报。这时候不应该已经曝光过了吗？
>   2.   QADCancelType 和 QADPauseCancelType 的关系是啥，为啥关闭广告要用 QADCancelType
